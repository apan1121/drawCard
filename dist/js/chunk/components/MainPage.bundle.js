"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[237],{5080:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var o=r(3967),n={key:0,class:"main-page"},a={style:{padding:"0px 10px"}};var i=r(3565),c=r(2678),l=r(988);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p={name:"MainPage",components:{HeaderBar:(0,o.defineAsyncComponent)((()=>r.e(209).then(r.bind(r,4692)))),DrawCardStorageBox:(0,o.defineAsyncComponent)((()=>r.e(943).then(r.bind(r,5991)))),LuckyDrawBox:(0,o.defineAsyncComponent)((()=>r.e(580).then(r.bind(r,7880))))},filters:{},props:{},data:()=>({audioPlayer:{},player:!1,langPaths:["common"]}),computed:d({},(0,c.mapGetters)({config:"config",cardList:"cardList",prizeList:"prizeList",prizeCardMapping:"prizeCardMapping",winnerAudio:"winnerAudio",playWinnerAudio:"playWinnerAudio"})),watch:{i18nReady:{handler(){this.initSystem({DefaultEventName:this.$t("common.Random.EventName")}),this.setWebSEO()}},currentI18nLocal:{handler(){this.setWebSEO()}},config:{deep:!0,handler(){this.saveToLocalStorageAct()}},"config.webTitle":{deep:!0,handler(){l.XD.setDefault({WebTitle:this.config.webTitle})}},cardList:{deep:!0,handler(){this.saveToLocalStorageAct()}},prizeList:{deep:!0,handler(){this.saveToLocalStorageAct()}},prizeCardMapping:{deep:!0,handler(){this.saveToLocalStorageAct()}},playWinnerAudio:{deep:!0,handler(e,t){e!==t&&this.audioPlayer[e]&&this.audioPlayer[e]&&(this.player&&this.player.pause(),this.player=this.audioPlayer[e],this.player.pause(),this.player.currentTime=0,this.player.play()),!1!==e&&this.setPlayWinnerAudio(!1)}},isTutorial:{deep:!0,handler(e,t){e!==t&&l.XD.setDefault({isTutorial:this.isTutorial})}}},created(){},mounted(){this.init()},updated(){},unmounted(){},methods:d(d(d({},(0,c.mapActions)({})),(0,c.mapMutations)({CheckAdBlock:"CheckAdBlock",saveToLocalStorage:"saveToLocalStorage",initSystem:"initSystem",setPlayWinnerAudio:"setPlayWinnerAudio"})),{},{init(){var e=this;for(var t in l.Xb.listen("drawDrawStorage",(t=>{e.listenLocalStorageChange()})),e.winnerAudio)this.audioPlayer[t]=new Audio("./dist/mp3/".concat(e.winnerAudio[t]));(0,i.detectAnyAdblocker)().then((t=>{e.CheckAdBlock(t)})),l.XD.setDefault({locale:this.currentI18nLocal}),l.XD.mixpanel("page_view",{}),l.XD.gtag("event","page_view",{})},saveToLocalStorageAct(){var e=this;clearTimeout(e.saveToLocalStorageTimer),e.saveToLocalStorageTimer=setTimeout((()=>{e.saveToLocalStorage()}),500)},setWebSEO(){var e=this,t=e.$t("common.WebsiteTitle"),r=e.$t("common.WebsiteDesc");window.document.title=t;var o=document.createElement("a");o.href=window.location.href;var n=l.Z_.getJsonFromUrl(o.search.substr(1));n.lang=e.currentI18nLocal,o.search=l.Z_.object2QueryStr(n);var a=o.href;document.querySelector("meta[name='apple-mobile-web-app-title']").content=t,document.querySelector("meta[property='og:title']").content=t,document.querySelector("meta[name='description']").content=r,document.querySelector("meta[property='og:description']").content=r,document.querySelector("meta[property='og:url']").content=a,document.querySelector("link[rel='canonical']").href=a}})};const m=(0,r(4407).Z)(p,[["render",function(e,t,r,i,c,l){var s=(0,o.resolveComponent)("header-bar"),d=(0,o.resolveComponent)("lucky-draw-box"),u=(0,o.resolveComponent)("draw-card-storage-box");return e.i18nReady?((0,o.openBlock)(),(0,o.createElementBlock)("div",n,[(0,o.createVNode)(s),(0,o.createElementVNode)("main",a,[(0,o.createVNode)(d)]),e.config.backgroundImg?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"bg-img",style:(0,o.normalizeStyle)({"background-image":"url("+e.config.backgroundImg+")",opacity:e.config.backgroundOpacity})},null,4)):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(u)])):(0,o.createCommentVNode)("",!0)}]])}}]);